<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <title>Donacion me PayPal Sandbox</title>
    <!-- PayPal JS SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AZozhDnREhn1-aMO1u6eFOVBnD_XPdrIjNm6p0pZ_XOcJhOkMs0QxzJE0T9kAQnjg3LmvuKt32PpaLmW&currency=EUR"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        input { padding: 5px; margin: 5px 0; width: 200px; }
        label { font-weight: bold; }
    </style>
</head>
<body>

    <h2>Bej një donacion</h2>

    <label>Emri (opsional)</label><br>
    <input type="text" id="name" placeholder="Shkruaj emrin tuaj"><br>

    <label>Shuma e donacionit (€)</label><br>
    <input type="number" id="amount" min="1" step="0.5" placeholder="Shuma në Euro"><br><br>

    <div id="paypal-button-container"></div>

    <script>
        // Krijimi i butonit PayPal
        paypal.Buttons({

            createOrder: function(data, actions) {
                let amount = document.getElementById("amount").value;
                if (!amount || amount <= 0) {
                    alert("Vendosni një shumë të vlefshme!");
                    return;
                }
                return actions.order.create({
                    purchase_units: [{
                        amount: { value: amount }
                    }]
                });
            },

            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    let name = document.getElementById("name").value || details.payer.name.given_name;
                    alert("Pagesa u krye me sukses! Faleminderit, " + name + "!");
                });
            },

            onError: function(err) {
                alert("Ndodhi një gabim gjatë pagesës");
                console.error(err);
            },

            onCancel: function(data) {
                alert("Përdoruesi anuloi pagesën.");
            }

        }).render('#paypal-button-container'); // Vendos butonin PayPal
    </script>

</body>
</html>
